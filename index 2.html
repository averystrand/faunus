<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Referral Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f7f7f7; }
    input { padding: 10px; font-size: 16px; width: 300px; margin-bottom: 20px; }
    .result { background: white; padding: 20px; border-radius: 8px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    h2 { margin-bottom: 5px; }
    .referrers { font-style: italic; color: #444; }
  </style>
</head>
<body>
  <h1>Referral Tracker</h1>
  <input type="text" id="searchInput" placeholder="Search by prospect or company...">
  <div id="results"></div>

  <script>
    // Dummy data - replace with actual data or fetch from a static file
    const data = [
      { referrer: "Ben", prospect: "Jane Doe", company: "Stripe", status: "Can intro" },
      { referrer: "Steve", prospect: "John Smith", company: "Stripe", status: "Can intro" },
      { referrer: "Matt", prospect: "Jane Doe", company: "Stripe", status: "Can intro" },
      { referrer: "Ben", prospect: "Alice Tan", company: "Plaid", status: "Maybe" },
      { referrer: "Steve", prospect: "Bob Marley", company: "Square", status: "No" }
    ];

    document.getElementById('searchInput').addEventListener('input', function() {
      const query = this.value.trim().toLowerCase();
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      const grouped = {};

      data.forEach(entry => {
        if (entry.status !== "Can intro") return;
        if (entry.prospect.toLowerCase().includes(query) || entry.company.toLowerCase().includes(query)) {
          const key = entry.prospect + '|' + entry.company;
          if (!grouped[key]) grouped[key] = [];
          grouped[key].push(entry.referrer);
        }
      });

      for (const key in grouped) {
        const [prospect, company] = key.split('|');
        const div = document.createElement('div');
        div.className = 'result';
        div.innerHTML = `
          <h2>${prospect}</h2>
          <div>${company}</div>
          <div class="referrers">Can intro: ${grouped[key].join(', ')}</div>
        `;
        resultsDiv.appendChild(div);
      }
    });
  </script>
</body>
</html>